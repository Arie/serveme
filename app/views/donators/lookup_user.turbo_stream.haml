= turbo_stream.update "user-lookup-result" do
  - if @users.any?
    - @users.each do |user|
      .card.border-success.mb-2
        .card-body.p-3
          .d-flex.align-items-center
            %div.me-3{data: { 
                       controller: "steam-avatar", 
                       "steam-avatar-user-id-value": user.id,
                       "steam-avatar-steam-uid-value": h(user.uid),
                       "steam-avatar-size-value": "medium"
                     }}
              %img.rounded-circle{src: "https://avatars.steamstatic.com/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_medium.jpg",
                                  width: "50", height: "50", alt: user.nickname,
                                  data: { "steam-avatar-target": "image" }}
            .flex-grow-1.px-3
              %h6.mb-0= user.nickname
              %small.text-muted 
                = "User ##{user.id} â€¢ Steam ID: #{user.uid}"
                - if user.donator? && user.donator_until
                  %br
                  %h5.badge.bg-success.text-white.mb-0 Donator until #{l(user.donator_until, format: :short)}
            %button.btn.btn-sm.btn-success{type: "button", 
                                         data: {action: "click->user-lookup#selectUser",
                                               user_id: user.id,
                                               user_name: user.nickname}}
              Select
  - else
    .alert.alert-warning.alert-sm.mb-0
      No users found. Try using Steam ID, Steam ID64, User ID (#123), or nickname.